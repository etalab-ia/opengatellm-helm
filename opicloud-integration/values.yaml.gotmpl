elasticsearch:
  enabled: false

opengatellm:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-production"
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      external-dns.alpha.kubernetes.io/ingress-hostname-source: defined-hosts-only
      external-dns.alpha.kubernetes.io/ttl: "10"
    hosts:
      - host: opengatellm.admin-dev-osc-cgw1-bacasable-wapp-03.k8s.cloud.incubateur.net
        paths:
          - path: /
    tls:
      - secretName: opengatellm-tls
        hosts:
          - opengatellm.admin-dev-osc-cgw1-bacasable-wapp-03.k8s.cloud.incubateur.net

  postgresql:
    enabled: false
    clusterName: cnpg-cluster-albert-ppr

  opengatellm:
    structuredConfig:
      dependencies:
        elasticsearch:
          hosts: http://elasticsearch-master:9200

    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop: [ALL]
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
      runAsUser: 1100
      runAsGroup: 1100

vllm-stack:
  routerSpec:
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop: [ALL]
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
  servingEngineSpec:
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop: [ALL]
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    strategy:
      type: Recreate

playground:
  image:
    repository: ghcr.io/ohemelaar-dinum/opengatellm
    tag: main
  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop: [ALL]
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
    runAsUser: 1100
    runAsGroup: 1100
  resources:
    requests:
      memory: 1Gi
    limits:
      memory: 1Gi
embeddings:
  enabled: false
  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop: [ALL]
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
    runAsUser: 1100
    runAsGroup: 1100
